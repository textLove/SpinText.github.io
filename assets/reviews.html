<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Reviews - Text Love</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Free Bootstrap 4 Template by uicookies.com">
    <meta name="keywords"
        content="Free website templates, Free bootstrap themes, Free template, Free bootstrap, Free website template">

    <link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600|Montserrat:200,300,400"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/loadingio/ldbutton@v1.0.1/dist/ldbtn.min.css" />
    <link rel="stylesheet" href="./css/bootstrap/bootstrap.css">
    <link rel="stylesheet" href="./css/loading.min.css">
    <link rel="stylesheet" href="./fonts/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="./fonts/law-icons/font/flaticon.css">

    <link rel="stylesheet" href="./fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/slick.css">
    <link rel="stylesheet" href="./css/slick-theme.css">

    <link rel="stylesheet" href="./css/helpers.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/landing-2.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/7.8.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.8.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.8.1/firebase-database.js"></script>
    <script defer src="/__/firebase/7.8.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.8.1/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/slick.min.js"></script>
    <script src="./js/jquery.waypoints.min.js"></script>
    <script src="./js/jquery.easing.1.3.js"></script>
    <style>
        div#imageContainer {
            height: 330px;
        }

        input#textArea3 {
            width: 100%;
        }

        nav {
            background: #4f7ddb;
        }

        .imgMainBOx>div {
            display: flex;
            justify-content: space-between;
        }

        div#msgBox {
            width: 60%;
            margin-left: 20px;
            width: 60%;
            margin-left: 20px;
            height: 400px;
            overflow: auto;
            padding: 0px 1px;
        }

        div#msgBox p {
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            background: #ffffff;
            padding: 5px 10px;
            font-size: 14px;
            border-radius: 5px;
        }

        #switchWrapper {
            position: absolute;
            top: 75px;
            left: calc(50% - 250px);
            width: 500px;
            border-radius: 5px;
        }

        div#imageContainer img {
            width: 50%;
            height: 50%;
        }

        div#bar {
            display: flex;
            margin-bottom: 10px;
            width: 400px;

        }

        div#bar img {
            width: 20px;
            height: 20px;
        }

        div#bar>div {
            display: flex;
        }

        div#bar>div p {
            padding: 0;
            margin: 0 5px;
        }

        body {
            background-color: #e2e1e0;
        }

        .imgMainBOx {
            position: relative;
            top: 180px;
            width: 800px;
            margin: 0 auto;
        }

        mark.marked {
            background: #070000d6;
            color: #ffffff;
            font-weight: 400;
            border-radius: 5px;
            padding: 3px 5px;
        }

        .click {
            background-color: #ffefbf !important;
        }

        .doButton {
            margin: 10px auto;
            width: 85px;
        }

        div#reviewBox {
            margin-bottom: 20px;
            overflow: auto;
            display: grid;
            grid-gap: 5px;
            width: 640px;
            grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
            grid-template-rows: repeat(2, 110px);
        }

        div#reviewBox>div>div {
            font-size: 16px;
            text-align: center;
            font-weight: 600;
        }

        div#reviewBox>div p {
            cursor: pointer;
        }

        div#reviewBox>div {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100px;
            cursor: pointer;
            justify-content: center;
            border-radius: 5px;
            background: #FFFFFF;
        }

        .positive {
            border: 3px solid #71E277 !important;
        }

        .negative {
            border: 3px solid #F6BFB9 !important;
        }

        div#reviewBox p {
            margin: 0;
            padding: 0;
            font-size: 14px;
        }

        .doButton button {
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
    </style>
</head>

<body data-spy="scroll" data-target="#pb-navbar" style="overflow: unset;" data-offset="200">

    <nav class="navbar navbar-expand-lg navbar-dark pb_navbar pb_scrolled-light" id="pb-navbar">
        <div class="container">
            <a class="navbar-brand" href="/index.html">SpinText</a>
            <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse"
                data-target="#probootstrap-navbar" aria-controls="probootstrap-navbar" aria-expanded="false"
                aria-label="Toggle navigation">
                <span><i class="ion-navicon"></i></span>
            </button>
            <div class="collapse navbar-collapse" id="probootstrap-navbar">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a class="nav-link" href="/blogs.html">Blogs</a></li><li class="nav-item"><a class="nav-link" href="/home.html">Stories</a></li>
                    <li class="nav-item"><a class="nav-link" href="/reviews.html">Reviews</a></li>
                    <li id="logout" class="nav-item cta-btn ml-xl-2 ml-lg-2 ml-md-0 ml-sm-0 ml-0"><a class="nav-link"
                            href="#" target="_blank"><span class="pb_rounded-4 px-4">
                                Logout
                            </span></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- END nav -->

    <section class="sec">
        <div class="container">
            <div id="switchWrapper" class="custom-control custom-switch">
                <input type="text" id="textArea3" placeholder="CSV path"
                    value="https://35.193.179.215/datasets/reviews/5.0__cell_phones_unlocked_android_5.1_mtk6580_quad_core_rom_4gb_5.0mp_camera_dual_sim_quadband-juning_gsm_3g_smartphone_white.csv"
                    aria-label="url" aria-describedby="basic-addon1" />
                <div class="doButton">
                    <button id="convert" type="button" class="btn btn-primary">Convert</button>
                </div>
            </div>
            <div class="imgMainBOx">
                <label for="textArea2">Output</label>
                <div id="bar"></div>
                <div>
                    <div id="reviewBox">

                    </div>
                    <div id="msgBox">

                    </div>
                </div>
            </div>

        </div>
    </section>
    <!-- END section -->

    <!-- loader -->
    <div id="pb_loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#1d82ff" /></svg></div>



    <script src="./js/main.js"></script>
    <script src="./js/mark.min.js"></script>



    <script>
        document.addEventListener('DOMContentLoaded', function () {
            $('#logout').click(signOut);
            $('#pan1').hide();
            var userData;
            function signOut() {
                firebase.auth().signOut().then(function () {
                    window.location = "/index.html"
                }, function (error) {
                    console.error(error)
                });
            }
            function getReviewDetail(e) {
                $('div#reviewBox>div').removeClass('click')
                var el = $(e.currentTarget);
                el.addClass('click');
                debugger
                var ID = el.data('id');
                var keyPhrase = el.data('keyPhrase');
                var url = el.data('url');
                var similarPhrases = el.data('similarPhrases');
                var SYN = {}
                similarPhrases.forEach(x => SYN[x] = keyPhrase);
                if (ID) {
                    $('#msgBox').empty();
                    axios.post('https://35.193.179.215:443/reviews', {
                        ids: ID, url
                    }).then((apiResponse) => {
                        const apiData = apiResponse.data
                        apiData.forEach((dt) =>
                            $('#msgBox').append(`<p>${dt}</p>`)
                        )
                        $('#msgBox').mark(keyPhrase, {
                            className: 'marked',
                            synonyms: SYN,
                            separateWordSearch: false
                        })
                    }).catch(function (error) {
                        console.log("#ERROR", error);
                    });
                }
            }
            $('div#reviewBox>div p').on('click', (e) => {

            })
            $('#customSwitch1').click(() => {
                if ($('#customSwitch1').is(":checked")) {
                    $('#pan1').hide();
                    $('#pan2').show();
                } else {
                    $('#pan2').hide();
                    $('#pan1').show();
                }
            })
            function getBar(apiData) {
                $('#bar').empty();
                $('#bar').append(`
                           <div>Total Reviews: ${apiData.totalReviews}</div>
                           <div><p>&#128578;</p> ${apiData.positvieReviwes}</div>
                           <div><p>&#128577;</p> ${apiData.negativeReviews}</div>
                           <div><p>&#128528;</p> ${apiData.neutralReviwes}</div>
                            `)
            }
            $('#convert').click(function () {
                $('#bar').empty();
                $('#msgBox').empty()
                $('#convert').text('Loading....').attr("disabled", true);
                $('#reviewBox').empty();
                var DATA = $('#textArea3').val().trim();
                if (DATA && userData) {
                    debugger
                    axios.post('https://35.193.179.215:443/reviewsummary', { url: DATA })
                        .then((apiResponse) => {
                            $('#convert').text('Convert').attr("disabled", false);
                            const apiData = apiResponse.data
                            debugger
                            getBar(apiData);
                            var DATA1 = JSON.parse(apiData.reviewSummary);
                            DATA1.forEach((dt) => {
                                var tmpl = $(`<div class="${dt.sentiment}"><div>${dt.keyPhrase}</div><p>Reviews(${dt.reviewIds.length})</p></div>`);
                                tmpl.data('id', dt.reviewIds);
                                tmpl.data('keyPhrase', dt.keyPhrase);
                                tmpl.data('url', DATA);
                                tmpl.data('similarPhrases', apiData.similarPhrases[dt.keyPhrase] || []);
                                tmpl.click(getReviewDetail);
                                $('#reviewBox').append(tmpl);
                            })
                        })
                        .catch(function (error) {
                            console.log("#ERROR", error);
                        });
                }
            });
            firebase.auth().onAuthStateChanged(function (user) {
                if (user) {
                    firebase.database().ref('users/' + user.uid)
                        .once('value', snapshot => {
                            userData = snapshot.val();
                            userData.uid = user.uid;
                        });
                } else {
                    signOut()
                }
            });
            const DEF_DATA = {"negativeReviews":11,"neutralReviwes":2,"otherReviews":0,"positvieReviwes":7,"reviewSummary":"[{\"keyPhrase\": \"unverified purchase reviews\", \"sentiment\": \"positive\", \"relevanceScore\": 0.80847, \"reviewIds\": [515], \"ctx\": true}, {\"keyPhrase\": \"special prize\", \"sentiment\": \"positive\", \"relevanceScore\": 0.661513, \"reviewIds\": [505, 515], \"ctx\": true}, {\"keyPhrase\": \"great phone\", \"sentiment\": \"positive\", \"relevanceScore\": 0.647862, \"reviewIds\": [499, 500, 503, 504, 505, 515], \"ctx\": true}, {\"keyPhrase\": \"higher prices\", \"sentiment\": \"positive\", \"relevanceScore\": 0.624326, \"reviewIds\": [499, 500, 503, 504, 505, 515], \"ctx\": true}, {\"keyPhrase\": \"flexible rubber case-user manualOverall\", \"sentiment\": \"positive\", \"relevanceScore\": 0.575306, \"reviewIds\": [499, 500, 503, 504, 505, 515], \"ctx\": true}, {\"keyPhrase\": \"beautiful LCD display.And\", \"sentiment\": \"positive\", \"relevanceScore\": 0.555514, \"reviewIds\": [499, 503, 505], \"ctx\": true}, {\"keyPhrase\": \"front\", \"sentiment\": \"positive\", \"relevanceScore\": 0.518566, \"reviewIds\": [499, 504], \"ctx\": true}, {\"keyPhrase\": \"Battery\", \"sentiment\": \"negative\", \"relevanceScore\": 0.919812, \"reviewIds\": [507, 510], \"ctx\": true}, {\"keyPhrase\": \"charge\", \"sentiment\": \"negative\", \"relevanceScore\": 0.628937, \"reviewIds\": [506, 510], \"ctx\": true}, {\"keyPhrase\": \"black screens\", \"sentiment\": \"negative\", \"relevanceScore\": 0.600909, \"reviewIds\": [510], \"ctx\": true}]","similarPhrases":{"2G Quad Band":[],"2G speeds":[],"2G speeds.The phones":[],"3G":["3G","3G"],"3GCellphone Gold":[],"4G":[],"4G LTE services":[],"4g":[],"AT&T":[],"AT&T store":["factory"],"Amazon":[],"Android":["android"],"Android phone":[],"Arabic":[],"Attractive phone":["phone"],"Bahasa Indonesia":[],"Bahasa Malaya":[],"Battery":["battery life"],"Bluetooth":["headsets"],"Bluetooth speaker":[],"CDMA SIM card":[],"Cestina":[],"Deutsch":[],"English":[],"Espanola":[],"GSM":["T-Mobile","GSM","GSM"],"Google play store":["flexible rubber case-user manualOverall"],"Greek":[],"Hebrew":[],"Internet":[],"Italiano":[],"Justin beiber song":[],"MTK6580 Quad Core ROM 4GB 5.0MP Camera Dual Sim Quadband":["quad core"],"Nederland":[],"Persian":[],"Phone":[],"Phones":[],"Portuguese":[],"SIM card":[],"Samsung":[],"Samsung lightening charger":[],"T-Mobile":["great phone","GSM"],"Traditional Chinese.If":["country","country","good use"],"USB Cable charger-Wall charger-screen protector-clear":[],"WCDMA":[],"WCDMA SIM card":[],"Worst phone":["phone","day","thing"],"accessories.It":[],"actual purchases":["higher prices","data"],"additional advantage":[],"amazing phone":["great phone","iPhone 6s Plus"],"android":["latest android system","Android"],"apps":[],"arrival":["day"],"average phone":[],"battery":[],"battery life":["charge","Battery"],"be.It":[],"beautiful LCD display.And":["variety of colors","camera"],"beneficiary":[],"best thing":[],"better protection":["needs"],"bit":[],"black screens":[],"box":[],"branded phone":["great phone"],"button":[],"calls":["phone"],"camera":["beautiful LCD display.And"],"charge":["battery life"],"charger":["charger","charger"],"cheesiness of the planted reviews":[],"clarity.The phone":[],"companies":[],"cost":["higher prices"],"countless pictures":[],"country":["Traditional Chinese.If"],"data":["product","memory card","actual purchases"],"date":["end","week"],"day":["arrival","weeks","Worst phone","work"],"days":["none","hour"],"diagonosis":[],"different country.Its":[],"different sims cards":[],"discount":["price"],"dollars":[],"dual sim phone":["sim cards"],"durable":[],"end":["front","date"],"exchange":["higher prices"],"expectations":[],"experience":["thing"],"extra SIM card port":[],"factory":["factory mode","AT&T store"],"factory mode":["factory"],"fan":[],"feature":["music"],"features of the phone":["iPhone 6s Plus"],"flexible rubber case-user manualOverall":["support network of the phone","Google play store","good wireless type of phone","good use","high enough quality"],"free shipping":["travel"],"friend":["niece"],"friendly user.Anyway":[],"front":["end"],"functions":[],"gig memory card":[],"girlfriend":[],"glitches":[],"good use":["flexible rubber case-user manualOverall","needs","Traditional Chinese.If"],"good wireless type of phone":["great phone","flexible rubber case-user manualOverall","needs","iPhone 6s Plus"],"good.This phone":[],"great phone":["support network of the phone","T-Mobile","good wireless type of phone","branded phone","amazing phone"],"headsets":["Bluetooth"],"helpful way":[],"high enough quality":["flexible rubber case-user manualOverall","needs"],"higher prices":["cost","price tag","price","exchange","actual purchases"],"honest review":["unbiased opinion"],"hour":["week","days"],"hours":[],"iPhone 6s Plus":["good wireless type of phone","features of the phone","amazing phone"],"iPhone lover":[],"image":[],"importance":[],"integrity of the seller":[],"issues":[],"it.The internet":[],"item":["prime item"],"know.The phone":[],"lag":[],"language":[],"latest android system":["android"],"life easier.Its":[],"load pages":[],"lollipop":[],"lots of specs":[],"loud music.This phone":[],"low either.However":[],"memory card":["sim cards","data"],"memory of your phone":[],"micro sim":[],"mind":[],"moment":[],"month":["price"],"more.The camera":[],"movies":[],"music":["video","feature"],"needs":["support network of the phone","better protection","good wireless type of phone","good use","high enough quality","such good products"],"network":[],"newer brand of phone.Overall":[],"niece":["friend"],"none":["reasons","thing","days"],"obvious looks":[],"obvious plants":[],"only con":[],"opinion":["unbiased opinion"],"opportunity":[],"pass":[],"password lock":[],"phone":["Attractive phone","phone","phone","phone","phone","sim card","Worst phone","calls"],"phone calls":[],"phone carriers":[],"phone protector":[],"phone storage":[],"phone work":[],"phone.But":[],"phone.It":[],"phones":[],"photos":["videos"],"picture":[],"pictures":[],"plenty of space":[],"pocket":[],"port":[],"pretty phone":[],"price":["price","price","higher prices","month","discount"],"price tag":["higher prices"],"prime item":["item"],"product":["data"],"quad core":["MTK6580 Quad Core ROM 4GB 5.0MP Camera Dual Sim Quadband"],"quality":[],"reasons":["none"],"regret":[],"regular sim card":["sim cards"],"review":[],"review of the Juning cell phone":[],"right phone matters":[],"samsung galaxy s3":[],"screen":[],"screen protector":[],"selfie addict":[],"service":[],"signal":[],"sim card":["sim cards","phone"],"sim cards":["sim card","dual sim phone","regular sim card","memory card"],"sister":[],"size":[],"snaps":[],"son":[],"sound quality":[],"special prize":["star review"],"speed":[],"speed of the phone":[],"standard sim":[],"star review":["special prize"],"star reviews":[],"such good products":["needs"],"support network of the phone":["great phone","flexible rubber case-user manualOverall","needs"],"tech":[],"them.The support language of the phone":[],"thing":["none","experience","Worst phone","work"],"times":[],"travel":["free shipping"],"unbiased opinion":["opinion","honest review"],"unbiased review.The reseller":[],"unlocked phone":[],"unverified purchase reviews":[],"user":[],"variety of colors":["beautiful LCD display.And"],"video":["music"],"videos":["photos"],"volume":[],"waste":[],"way":[],"week":["date","hour"],"weeks":["day"],"wireless network of your choice":[],"work":["day","thing"]},"totalReviews":20};
            getBar(DEF_DATA);
            JSON.parse(DEF_DATA.reviewSummary).forEach((dt) => {
                var tmpl = $(`<div class="${dt.sentiment}"><div>${dt.keyPhrase}</div><p>Reviews(${dt.reviewIds.length})</p></div>`);
                tmpl.data('id', dt.reviewIds);
                tmpl.data('keyPhrase', dt.keyPhrase);
                tmpl.data('similarPhrases', DEF_DATA.similarPhrases[dt.keyPhrase] || []);
                tmpl.data('url', 'https://35.193.179.215/datasets/reviews/5.0__cell_phones_unlocked_android_5.1_mtk6580_quad_core_rom_4gb_5.0mp_camera_dual_sim_quadband-juning_gsm_3g_smartphone_white.csv');
                tmpl.click(getReviewDetail);
                $('#reviewBox').append(tmpl);
            });
            $($('#reviewBox').children()[0]).trigger('click');
        });
    </script>
</body>

</html>